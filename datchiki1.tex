\providecommand{\pdfxopts}{a-1b,cyrxmp}
\providecommand{\thisyear}{2020}
\immediate\write18{rm \jobname.xmpdata}%  uncomment for Unix-based systems
\begin{filecontents*}{\jobname.xmpdata}
\Title{Датчики. Лабораторная работа №1\textemdash\thisyear}
\Author{Артем Николаевич Прокшин}
\Creator{pdfTeX + pdfx.sty with options \pdfxopts }
\Subject{Лабораторная работа №1
\sep
 изучение операционного усилителя}
\Keywords{операционный усилитель, ЛЭТИ}
\CoverDisplayDate{март \thisyear}
\CoverDate{2020-03-22}
\Copyrighted{True}
\Copyright{Public Domain}
\CopyrightURL{http://github.com/trot-t}
\Creator{pdfTeX + pdfx.sty with options \pdfxopts }
\end{filecontents*}

\documentclass[a4paper,12pt]{article}

\pdfcompresslevel=9

\usepackage[\pdfxopts]{pdfx}[2016/03/09]
\PassOptionsToPackage{obeyspaces}{url}
\let\tldocrussian=1  % for live4ht.cfg


\usepackage{extsizes}

\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usepackage[european,cuteinductors,smartlabels,siunitx]{circuitikz}

%%% Межстрочный интервал
\usepackage{setspace}

%% таблицы
\usepackage{booktabs}
%multi-row
\usepackage{multirow}

%% для кода
\usepackage{color}
\usepackage{listingsutf8}

\input{colors}

\lstset{%
  language=C++,%
  morekeywords={constexpr,nullptr,size_t,uint32_t,assert,override,final},%
  basicstyle=\ttfamily\footnotesize,%
  sensitive=true,%
  keywordstyle=\color{blue},%
  stringstyle=\color{darkgreen},%
  commentstyle=\color{violet},%
  showstringspaces=false,%
  tabsize=2,%
  frame=leftline,
  rulecolor=\color{lightblue},
  xleftmargin=20pt,
}

\lstset{
%extendedchars=\true,
%inputencoding=utf8x,   
  numberstyle=\tiny,
  numbers=left,
  numbersep=10pt,
  xleftmargin=20pt,
  %framesep=4.5mm,
  %framexleftmargin=2.5mm,
  framexleftmargin=5pt,
  framesep=15pt,
  fillcolor=\color{lightgrey},
}


\title{Прецизионные схемы и малошумящая аппаратура}
\author{}
% Конец преамбулы
\begin{document}
%\maketitle
%\begin{tikzpicture}
%\newcommand{\xb}{-3}
%\newcommand{\xa}{3}
%\draw[thin, ->] (-6,0) -- (6,0) node[right] {$X$};
%\draw[thin, ->] (0,-6) -- (0,6) node[left] {$Y$};
%\foreach \x\xtext in {-5/-5,5/5,{\xb}/\xb,{\xa}/{\displaystyle \frac{-b+\sqrt{b^2-4ac}}{2a}}} % 
%   \draw (\x,0.1) -- (\x,-0.1) node[below] {$\xtext$};

 %\draw[domain=-5:5, help lines, smooth]
 %       plot ({\x},{0.2*(\x-\xa)*(\x-\xb)});
%\end{tikzpicture}
%\section{Прецизионные схемы и малошумящая аппаратура}
\section{Изучение работы операционного усилителя}

{\it Цель:} изучить работу операционного усилителя, научиться измерять его статические характеристики, определять их аналитически, ознакомиться с погрешностью усилителя.
 
\subsection{Краткие теоретические сведения}

На современном этапе развития полупроводниковой техники усилители на дискретных элементах (транзисторах, резисторах и т.д.) в основном встречаются либо в виде выходных каскадов большой мощности, либо в виде усилителей высокой частоты.

Основу построения большинства усилителей в автоматических устройствах составляют операционные усилители (ОУ) -- многокаскадные транзисторные усилители постоянного тока, выполненные на одном полупроводниковом кристалле. 
Операционный усилитель имеет две входных цепи -- прямой и инвертирующий входы.

Идеальный ОУ обладает бесконечно большим коэффициентом передачи по напряжению, току и, соответственно, коэффициентом усиления по мощности. При построении усилителей систем автоматики на базе ОУ часть выходного сигнала через цепи {\bf отрицательной обратной связи} 
возвращается на инвертирующий вход. 
В этом случае коэффициент усиления (передачи) усилителя в целом определяется параметрами цепей отрицательной обратной связи.

Для получения нужных свойств в ОУ вводят отрицательные обратные связи. В ОУ с отрицательной обратной связью коэффициент усиления
зависит только от параметров цепи обратной связи и не зависит от параметров самого усилителя. В простейшем случае цепь 
обратной связи представляет собой делитель напряжения. При этом ОУ работает как линейный усилитель. Используют две основные
схемы включения ОУ, охваченного цепью ОС: инвертирующую и неинвертирующую. Инвертирующее включение (рис. \ref{inv}) применяют в 
большинстве аналоговых электронных устройств.

\begin{figure}[ht!]
\centering
\begin{tikzpicture}
	\draw
	(0,0) node[op amp] (opamp) {}
%	(opamp.-) node[ocirc, right]{}
	(opamp.-) to[R,l_={$R_1$},-o] ++ (-3,0) node(IN_P) {}
	(opamp.out) to[short,-o] ++ (1,0) node(OUT_P) {} 
	(opamp.-) to[short,*-] ++ (0,1.2) node (A) {} to[R,l={$R_{OC}$}] (opamp.out |- A) to[short,-*] (opamp.out)
	(opamp.+) --++ (-1,0) to[R,l_={$R_2$}] ++ (0,-3) node[tground] (G) {}
	(IN_P |- G) node[tground] {} to[short,-o] ++ (0,2.5) node(IN_M) {}
	($(IN_P) !0.5! (IN_M)$) node {$U_\textcyrillic{вх}$}
	(OUT_P |- G) node[tground] {} to[short,-o] ++ (0,2) node(OUT_M) {} 
	($(OUT_P) !0.5! (OUT_M)$) node {$U_\textcyrillic{вых}$}
	;
\end{tikzpicture}
	\caption{Инвертирующее включение операционного усилителя}
	\label{inv}
\end{figure}

Качественно работа инвертирующего усилителя иллюстрируется амплитудной (передаточной) характеристикой
$U_\textcyrillic{вых} = f(U_\textcyrillic{вх})$ (рис. \ref{amplitude_char}) и ам\-пли\-туд\-но-част\-от\-ной характеристикой(АЧХ)
$K_a = F(f)$ (рис. \ref{AX4}).


\begin{figure}[!ht]
\centering
\begin{tikzpicture}[scale=0.7]
\draw[->,>=latex] (-6,0) -- (6,0) node[above] {$U_\textcyrillic{вх}$};
\draw[->,>=latex] (0,-4.5) -- (0,5) node[left] {$U_\textcyrillic{вых}$};
\draw[ultra thick,domain=-3.5:2.5]
	plot(\x,{-\x-0.5});
\draw[ultra thick] (-5,3) -- (-3.5,3) (2.5,-3) -- (4.5,-3);
\draw[thin,dashed] (-6,3) -- (0,3) node[right] {$U_\textcyrillic{вых. max}$}
		(-6,3.8) -- (0,3.8) node[right] {$+U_\textcyrillic{пит.}$}
		(6,-3) -- (0,-3) node[left] {$U_\textcyrillic{вых. min}$}
		(6,-3.8) -- (0, -3.8) node[left] {$-U_\textcyrillic{пит.}$}
		(-0.5, 2) -- (-0.5,0); % node[below left] {U_\textcyrillic{сн.}$}; 

		\draw[thin,->,>=latex] (-1.5,2) -- (-0.5,2);
		\draw[thin,<-,>=latex] (0,2) -- (3,2) node[below] {$U_\textcyrillic{смещения}$};
% \draw[thin,dashed] (0,-0.5) -- (2,-0.5); по оси выходного напряжения - неправильно
%	\draw[thin,->,>=latex] (1.7,0.8) -- (1.7,0);
%	\draw[thin,<-,>=latex]  (1.7,-0.5) -- (1.7,-1.5) node[midway,right] {$U_\textcyrillic{см}$};
\draw (0,0) node[above right] {0};
\end{tikzpicture} 
\caption{амплитудная(передаточная) характеристика ОУ}
\label{amplitude_char}
\end{figure}

Амплитудная характеристика усилителя (рис. \ref{amplitude_char}) имеет явно выраженные нелинейные участки и линейный участок.
В пределах линейного участка выходное напряжение пропорционально входному напряжению. При отсутствии входного сигнала
$U_\textcyrillic{вх.} = 0$ выходное напряжение покоя ОУ выходное напряжение покоя ОУ $U_\textcyrillic{0 вых}$ отлично от нуля
и определяет статическую погрешность ОУ. Она обусловлена напряжением смещения нуля ОУ $U_\textcyrillic{СМ}$ (милливольты),
средним входным током $I_\textcyrillic{вх}$ и разностью входных токов ${\small\Delta} I_\textcyrillic{вх}$ ОУ.
Поэтому рекомендуется выбирать $R_2 = R_1R_{OC}/(R_1 + R_{OC})$. 
\footnote{Падение напряжения при протекании входных токов найдем в режиме покоя $u_\textcyrillic{вх.}=0$. 
Ток $I_\textcyrillic{вх.}$ инвертирующего входа может протекать по резисторам $R_1$ и $R_{OC}$, 
что создает на этом входе падение напряжения $U_\textcyrillic{у} = -\frac{R_1R_{OC}}{R_1 + R_{OC}}$.
Поскольку $K_U$ ОУ очень велик, то весьма малое значение $U_\textcyrillic{у}$ может вызвать
 существенные значения $U\textcyrillic{вых} = K_U U_\textcyrillic{у}$. 
 Ненулевое $U_\textcyrillic{вых.}$ при $u_\textcyrillic{вх.}=0$ затрудняет использование ОУ.
 Для исключения вредного влияния входных токов к прямому входу ОУ подключают резистор
 $R_2 = R_1R_{OC}/(R_1 + R_{OC})$. Входной ток прямого входа создает в нем падение  напряжения,
 входной сигнал определяется разностью напряжений на прямом и инверсном входах и при равенстве 
 входных токов обоих входов $u_\textcyrillic{вх} = 0$.
} 
Обычно $R_1>5$кОм. Устранить выходное напряжение
покоя $U_\textcyrillic{0 вых}$ можно внешней регулировкой (балансировкой нуля). Однако лучшей гарантией получения
минимального напряжения ошибок является правильный выбор типа операционного усилителя и выполнение необходимых соотношений
резисторами схемы. При этом желательно использовать в устройстве резисторы небольших номиналов. При приближении
$U_\textcyrillic{вых}$ к $U_\textcyrillic{напр.пит.}$ ОУ выходит из линейного режима и переходит в режим ограничения 
с уровнем насыщения $U_\textcyrillic{вых. max}$, близким к напряжению питания.

Коэффициент усиления по напряжению инвертирующего усилителя на основе идеального операционного усилителя
\begin{equation}
K_U = U_\textcyrillic{вых}/U_\textcyrillic{вх} = - R_2/R_1,
\end{equation}
где знак <<минус>> указывает на инверсию сигнала.

Входное сопротивление инвертирующего усилителя $R_\textcyrillic{вх} \approx R_1$

\begin{figure}[!ht]
\centering
\begin{tikzpicture}
	\draw[thin,->,>=latex] (0,0) -- (6,0) node[above] {$f$, Гц};
	\draw[thin,->,>=latex] 	(0,0) -- (0,3) node[right] {$K$, дБ};
	\draw (0,0) node[below] {0};
\foreach \x\xtext in {1/10,2/10^2,3/10^3,4/10^4,5/10^5} % 
   \draw (\x,0.0) -- (\x,-0.1) node[below] {$\xtext$};
	\draw[ultra thick] (0,2) -- (2,2) -- (5,0.2); 
\end{tikzpicture}
	\caption{амплитудно-частотная характеристика(АЧХ) ОУ}
	\label{AX4}
\end{figure}

На рис. \ref{diff} приведена схема дифференциального (разностного) усилителя на ОУ.

\begin{figure}[!ht]
\centering
	\begin{circuitikz}
        \draw
        (0,0) node[op amp] (opamp) {}
%       (opamp.-) node[ocirc, right]{}
		(opamp.-) to[R,l2_=$R_2$ and \SI{1}{\kilo\ohm},l2 halign=c, l2 valign=b] ++ (-5.5,0) node(IN_P) {}
		 --++ (0,-2) 
		 to[vsource,name=E2,l2=$E_2$ and \SI{0}{\volt}] ++ (0,-3)  node[tground] (G) {}
		 (E2.south east) node {-} (E2.south west) node {+}
        (opamp.out) to[short,-o] ++ (1,0) node(OUT_P) {}
        (opamp.-) to[short,*-] ++ (0,1.2) node (A) {} to[R,l2=$R_4$ and \SI{10}{\kilo\ohm},l2 halign=c, l2 valign=b] 
		(opamp.out |- A) to[short,-*] (opamp.out)
	(opamp.+)  to[R,l2=$R_1$ and \SI{1}{\kilo\ohm},l2 halign=c, l2 valign=b] ++ (-3,0) --++ (0,-1)
		 to[vsource,name=E1,l2=$E_1$ and \SI{0}{\volt}] ++ (0,-3)  node[tground] (G) {}
		 (E1.south east) node {-} (E1.south west) node {+}
		(opamp.+) to[short,*-] ++ (0,-1) to[R,l2=$R_3$ and \SI{10}{\kilo\ohm},l2 halign=c, l2 valign=b] (opamp.+ |- G) node[tground] {}

;\end{circuitikz}
        \caption{схема включения операционного усилителя}
        \label{diff}
\end{figure}

На входы усилителя подаются два входных сигнала -- от источников $E_1$ и $E_2$, 
часть выходного напряжения $U$  через элементы отрицательной обратной связи (делитель напряжения $R_2$  и $R_4$) 
подаётся на инвертирующий вход усилителя. Коэффициент передачи усилителя по напряжению определяется как:
\begin{equation}
K_U = R_2 / (R_2+R_4)
\end{equation}

Тогда выходное напряжение схемы $U$ определяется разностью входных напряжений и коэффициентом передачи:
\begin{equation}
	U = (E_1 - E_2)\cdot K_U, \textcyrillic{ В}.
\label{Ku}
\end{equation}
В случае, если входные сигналы на прямом и инвертирующем входе усилителя равны, то согласно выражению (\ref{Ku}) %(2.16) 
выходное напряжение усилителя должно быть равно нулю. 
Но, так как в реальной схеме строгой симметрии входов усилителя достигнуть невозможно, не выполняется условие: $R_1 = R_2$; $R_3 = R_4$ (в основном влияет разброс параметров резисторов $R_1 \ldots R_4$), выходное напряжение отлично от нуля. 
Для дифференциального усилителя определяется {\bfкоэффициент подавления синфазного сигнала}
\begin{equation}
K_\textcyrillic{под}= U_\textcyrillic{дифф}/ U_\textcyrillic{синф},     %                             (3.8)
\end{equation}
	где $U_\textcyrillic{дифф}$ -- выходное напряжение усилителя при дифференциальном сигнале ($E_1= - E_2$); 
	$U_\textcyrillic{синф}$ -- выходное напряжение при синфазном сигнале ($E_1 = E_2$).
Работа реальных ОУ в области больших сигналов ограничивается {\bfмаксимальным выходным напряжением}, 
которое составляет для большинства интегральных ОУ 10\ldots12 В.

В области малых входных сигналов реальные ОУ вносят погрешности в выходной сигнал, вызванные прежде всего {\bfнапряжением смещения нуля} 
$E_\textcyrillic{см}$, т.е. при отсутствии входного дифференциального сигнала ($E_1 - E_2 = 0$) выходное напряжение 
не равно нулю ($U \ne 0$), и входным током усилителя $I_\textcyrillic{вх}$.

Для измерения напряжения смещения достаточно при нулевых входных сигналах измерить выходное напряжение, тогда:
\begin{equation}
	E_\textcyrillic{см} = U / K_U,\textcyrillic{ В}. %                                         (3.9)
\end{equation}
	Так как напряжение смещения обычно составляет десятые доли милливольта, то для его измерения необходимо увеличить коэффициент усиления по напряжению $K_U$, изменив соотношение резисторов цепи обратной связи, допустим, увеличив сопротивление резистора $R_4$.
Для измерения входного тока необходимо, значительно увеличив (в 100-1000 раз) величину сопротивления резисторов, измерить изменение напряжения смещения нуля, тогда входной ток операционного усилителя определится как
\begin{equation}
	I_\textcyrillic{вх} = {\small\Delta} E_\textcyrillic{см} / R_1,  A. %                                 (3.10)
\end{equation}
	При использовании различных элементов отрицательной обратной связи возможно построение инвертирующих и неинвертирующих усилителей, интеграторов и дифференциаторов сигналов, различных функциональных преобразователей и перемножителей сигналов.

\subsection{Последовательность выполнения задания}
\begin{enumerate}
\item Загрузить программу {\bf tina} и создать в ней схему дифференциального усилителя. 
Схема усилителя приведена на рис.\ref{diff}.
\item\label{p2} Изменить значение сопротивления обратной связи $R_4$ и соответственно $R_3$, $R_1=R_3$ (по индивидуальному заданию преподавателя) определить значение коэффициента усиления усилителя при принятом Вами значении сопротивления резистора $R_4$. 
Определить значение величины входного сигнала для достижения максимально возможного напряжения на выходе ($U_\textcyrillic{вых.мах} = 14$ В).
\item  Установить напряжение входного сигнала источника $E_1 = 0$В и, изменяя величину сигнала $E_2$ от минимальной до максимальной величины, 
	определённой в п.\ref{p2}%п.2
		, снять передаточную характеристику усилителя. Результаты измерений занести в таблицу \ref{tabl_diff}

\begin{table}[!ht]
\begin{tabular}{c|l|p{1.1cm}|p{1.1cm}|p{1.1cm}|p{1.1cm}|p{1.1cm}|p{1.1cm}}
\toprule
Режим & Параметр & 1& 2 & 3 & 4 & 5 & 6 \\
\midrule
\multirow{2}{*}{$E_1=0$} & $U_\textcyrillic{вх}$&&&&& \\
	\cmidrule{2-8}
			& $U_\textcyrillic{вых}$&&&&& \\
\midrule
\multirow{2}{*}{$E_2=0$} & $U_\textcyrillic{вх}$&&&&& \\
        \cmidrule{2-8}
                        & $U_\textcyrillic{вых}$&&&&& \\
\midrule
\multirow{2}{*}{$E_1=-E_2$} & $U_\textcyrillic{вх}$&&&&& \\
        \cmidrule{2-8}
                        & $U_\textcyrillic{вых}$&&&&& \\
\midrule
\multirow{2}{*}{$E_1=E_2$} & $U_\textcyrillic{вх}$&&&&& \\
        \cmidrule{2-8}
                        & $U_\textcyrillic{вых}$&&&&& \\
\bottomrule
\end{tabular}
	\caption{Измерение коэффициента передачи дифференциального усилителя}
	\label{tabl_diff}
\end{table}


\item
     Установить напряжение входного сигнала $E_2 = 0$ и, изменяя величину сигнала $E_1$ в тех же пределах, 
     снять передаточную характеристику усилителя. Результаты измерений занести в таблицу \ref{tabl_diff}.
\item  Устанавливая равные по величине, но противоположные по знаку величины $E_1$ и $E_2$, 
	снять характеристику усилителя при работе с дифференциальным сигналом. Результаты измерений занести в таблицу \ref{tabl_diff}.
\item Устанавливая равные по величине величины $E_1$ и $E_2$, снять характеристику усилителя при работе с синфазным сигналом. 
	Результаты измерений занести в табл. \ref{tabl_diff}.
\item  По результатам опыта определить коэффициенты усиления усилителя при работе как инвертирующего усилителя $K_{U-}$, 
	при работе как неинвертирующего усилителя  $K_{U+}$, при работе как дифференциального усилителя $K_U$, 
	а также коэффициент подавления синфазных сигналов $K_\textcyrillic{под}$.
\item  Замените используемый идеальный операционный усилитель на аналог реальной микросхемы, например LM407 или LM324.
\item Установив $E_1 = E_2 = 0$ В и, измерив выходное напряжение усилителя в этом случае, определить напряжение смещения операционного усилителя.
\item Увеличить величины сопротивления всех резисторов в 100 раз и, измерив выходное напряжение усилителя в этом случае, определить входной ток усилителя.
\end{enumerate}
\end{document}
